"use strict";var customSelect=document.querySelector(".custom-select"),originalSelect=customSelect.querySelector("select"),originalSelectOptions=Array.from(originalSelect.querySelectorAll("option")),customSelectFocus=customSelect.querySelector(".custom-select__focus"),customSelectFocusText=customSelectFocus.querySelector("span"),customSelectOptionsContainer=customSelect.querySelector(".custom-select__options"),customSelectOptions=[],customSpinbutton=document.querySelector(".spinbutton"),spinButton=customSpinbutton.querySelector('[role="spinbutton"]'),decreaseSpinbutton=customSpinbutton.querySelector("#decrease-people"),increaseSpinbutton=customSpinbutton.querySelector("#increase-people"),reservationForm=document.querySelector(".reservation-form"),nameInput=reservationForm.querySelector('input[name="name"]'),emailInput=reservationForm.querySelector('input[name="email"]'),monthInput=reservationForm.querySelector('input[name="month"]'),dayInput=reservationForm.querySelector('input[name="day"]'),yearInput=reservationForm.querySelector('input[name="year"]'),hourInput=reservationForm.querySelector('input[name="hour"]'),minutesInput=reservationForm.querySelector('input[name="minute"]'),reservationSubmitBtn=reservationForm.querySelector('button[type="submit"]'),CHECK_ICON_URL="./dist/assets/images/icons/icon-check.svg",EMAIL_REGEX=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function createCustomSelectOptions(){originalSelectOptions.forEach(function(e){e=createCustomOption(e);customSelectOptions.push(e),customSelectOptionsContainer.appendChild(e)})}function createCustomOption(e){var t=document.createElement("span"),n=(t.classList.add("custom-select__option"),t.setAttribute("data-selected",e.selected.toString()),t.setAttribute("data-value",e.value),t.addEventListener("click",handleCustomOption),document.createElement("img")),r=(n.setAttribute("src",CHECK_ICON_URL),n.setAttribute("alt",""),document.createElement("span"));return r.innerText=e.innerText,t.appendChild(n),t.appendChild(r),t}function handleCustomOption(e){var t=e.target;originalSelectOptions.forEach(function(e){return e.selected=e.value===t.dataset.value}),handleSelection(),closeCustomSelect()}function handleSelection(){var t=originalSelectOptions.filter(function(e){return e.selected})[0].value;customSelectFocusText.innerText=t.toUpperCase(),customSelectOptions.forEach(function(e){e.dataset.selected=(e.dataset.value===t).toString()})}function openCustomSelect(){customSelect.dataset.open="true"}function closeCustomSelect(){customSelect.dataset.open="false"}function handleSpinButton(e){switch(e.key){case"ArrowUp":e.preventDefault(),increasePeople();break;case"ArrowDown":e.preventDefault(),decreasePeople();break;case"Home":e.preventDefault(),setMinPeople();break;case"End":e.preventDefault(),setMaxPeople()}}function increasePeople(){var e=Number(spinButton.getAttribute("aria-valuenow")),t=Number(spinButton.getAttribute("aria-valuemax"));updateSpinButton(Math.min(e+1,t))}function decreasePeople(){var e=Number(spinButton.getAttribute("aria-valuenow")),t=Number(spinButton.getAttribute("aria-valuemin"));updateSpinButton(Math.max(e-1,t))}function setMaxPeople(){updateSpinButton(Number(spinButton.getAttribute("aria-valuemax")))}function setMinPeople(){updateSpinButton(Number(spinButton.getAttribute("aria-valuemin")))}function updateSpinButton(e){spinButton.setAttribute("aria-valuenow",e.toString()),spinButton.setAttribute("aria-valuetext","".concat(e," people")),spinButton.innerText="".concat(e," people")}function validateName(){return isBlank(nameInput.value)?displayFormError(nameInput,"This field is required"):removeFormError(nameInput)}function validateEmail(){var e=emailInput.value;return isBlank(e)?displayFormError(emailInput,"This field is required"):isValidEmail(e)?removeFormError(emailInput):displayFormError(emailInput,"Provide a valid email address")}function displayFormError(e,t){for(var n,r=e.closest(".form-group");r;){if(r.classList.add("error"),n=r.querySelector(".form-error")){n.innerText=t;break}r=r.parentElement.closest(".form-group")}return!1}function removeFormError(e){for(var t,n=e.closest(".form-group");n;)n.classList.remove("error"),(t=n.querySelector(".form-error"))&&(t.innerText=""),n=n.parentElement.closest(".form-group");return!0}function isBlank(e){return""===e}function isValidEmail(e){return EMAIL_REGEX.test(e)}createCustomSelectOptions(),originalSelect.addEventListener("keyup",function(e){switch(e.key){case"ArrowUp":case"ArrowDown":handleSelection();break;case"Enter":handleSelection(),closeCustomSelect()}}),customSelectFocus.addEventListener("click",function(e){originalSelect.focus()}),originalSelect.addEventListener("focusin",openCustomSelect),spinButton.addEventListener("keydown",handleSpinButton),increaseSpinbutton.addEventListener("click",increasePeople),decreaseSpinbutton.addEventListener("click",decreasePeople),reservationSubmitBtn.addEventListener("click",function(e){e.preventDefault(),validateName(),validateEmail()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc2VydmF0aW9uLWZvcm0udHMiLCJyZXNlcnZhdGlvbi1mb3JtLmpzIl0sIm5hbWVzIjpbImN1c3RvbVNlbGVjdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm9yaWdpbmFsU2VsZWN0Iiwib3JpZ2luYWxTZWxlY3RPcHRpb25zIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImN1c3RvbVNlbGVjdEZvY3VzIiwiY3VzdG9tU2VsZWN0Rm9jdXNUZXh0IiwiY3VzdG9tU2VsZWN0T3B0aW9uc0NvbnRhaW5lciIsImN1c3RvbVNlbGVjdE9wdGlvbnMiLCJjdXN0b21TcGluYnV0dG9uIiwic3BpbkJ1dHRvbiIsImRlY3JlYXNlU3BpbmJ1dHRvbiIsImluY3JlYXNlU3BpbmJ1dHRvbiIsInJlc2VydmF0aW9uRm9ybSIsIm5hbWVJbnB1dCIsImVtYWlsSW5wdXQiLCJtb250aElucHV0IiwiZGF5SW5wdXQiLCJ5ZWFySW5wdXQiLCJob3VySW5wdXQiLCJtaW51dGVzSW5wdXQiLCJyZXNlcnZhdGlvblN1Ym1pdEJ0biIsIkNIRUNLX0lDT05fVVJMIiwiRU1BSUxfUkVHRVgiLCJjcmVhdGVDdXN0b21TZWxlY3RPcHRpb25zIiwiZm9yRWFjaCIsIm9wdGlvbiIsImN1c3RvbU9wdGlvbiIsImNyZWF0ZUN1c3RvbU9wdGlvbiIsInB1c2giLCJhcHBlbmRDaGlsZCIsIm9wdGlvbldyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2hlY2tJbWFnZSIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsInNlbGVjdGVkIiwidG9TdHJpbmciLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVDdXN0b21PcHRpb24iLCJvcHRpb25UZXh0IiwiaW5uZXJUZXh0IiwiZSIsInRhcmdldCIsIm9wdCIsImRhdGFzZXQiLCJoYW5kbGVTZWxlY3Rpb24iLCJjbG9zZUN1c3RvbVNlbGVjdCIsInNlbGVjdGVkVmFsdWUiLCJmaWx0ZXIiLCJ0b1VwcGVyQ2FzZSIsIm9wZW5DdXN0b21TZWxlY3QiLCJvcGVuIiwiaGFuZGxlU3BpbkJ1dHRvbiIsImtleSIsInByZXZlbnREZWZhdWx0IiwiaW5jcmVhc2VQZW9wbGUiLCJkZWNyZWFzZVBlb3BsZSIsInNldE1pblBlb3BsZSIsInNldE1heFBlb3BsZSIsImN1cnJlbnRWYWx1ZSIsIk51bWJlciIsImdldEF0dHJpYnV0ZSIsIm1heFZhbHVlIiwidXBkYXRlU3BpbkJ1dHRvbiIsIk1hdGgiLCJtaW4iLCJtaW5WYWx1ZSIsIm1heCIsIm5ld1ZhbHVlIiwiY29uY2F0IiwidmFsaWRhdGVOYW1lIiwiaXNCbGFuayIsImRpc3BsYXlGb3JtRXJyb3IiLCJyZW1vdmVGb3JtRXJyb3IiLCJ2YWxpZGF0ZUVtYWlsIiwiZW1haWxWYWx1ZSIsImlzVmFsaWRFbWFpbCIsImlucHV0IiwibWVzc2FnZSIsImZvcm1FcnJvciIsImZvcm1Hcm91cCIsImNsb3Nlc3QiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlIiwiZW1haWwiLCJ0ZXN0IiwiZm9jdXMiXSwibWFwcGluZ3MiOiJhQUNBLElBQU1BLGFBQTRCQyxTQUFTQyxjQUFjLGdCQUFnQixFQUNuRUMsZUFBb0NILGFBQWFFLGNBQWMsUUFBUSxFQUN2RUUsc0JBQWtEQyxNQUFNQyxLQUFLSCxlQUFlSSxpQkFBaUIsUUFBUSxDQUFDLEVBQ3RHQyxrQkFBaUNSLGFBQWFFLGNBQWMsdUJBQXVCLEVBQ25GTyxzQkFBcUNELGtCQUFrQk4sY0FBYyxNQUFNLEVBQzNFUSw2QkFBNENWLGFBQWFFLGNBQWMseUJBQXlCLEVBQ2xHUyxvQkFBMEMsR0FHeENDLGlCQUFnQ1gsU0FBU0MsY0FBYyxhQUFhLEVBQ3BFVyxXQUEwQkQsaUJBQWlCVixjQUFjLHFCQUFxQixFQUM5RVksbUJBQXdDRixpQkFBaUJWLGNBQWMsa0JBQWtCLEVBQ3pGYSxtQkFBd0NILGlCQUFpQlYsY0FBYyxrQkFBa0IsRUFHekZjLGdCQUFtQ2YsU0FBU0MsY0FBYyxtQkFBbUIsRUFDN0VlLFVBQThCRCxnQkFBZ0JkLGNB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RUFBeUJILEVBQU1JLFFBQVEsYUFBYSxFQUdqREQsR0FDTkEsRUFBVWpELFVBQVVvRCxPQUFPLE9BQU8sR0FDbENKLEVBQVlDLEVBQVVwRixjQUFjLGFBQWEsS0FFbENtRixFQUFVdkMsVUFBWSxJQUVyQ3dDLEVBQVlBLEVBQVVFLGNBQWNELFFBQVEsYUFBYSxFQUcxRCxNQUFPLENBQUEsQ0FDUixDQUVBLFNBQVNWLFFBQVFuQyxHQUNoQixNQUFpQixLQUFWQSxDQUNSLENBRUEsU0FBU3dDLGFBQWFRLEdBQ3JCLE9BQU9oRSxZQUFZaUUsS0FBS0QsQ0FBSyxDQUM5QixDQXZNQS9ELDBCQUF5QixFQUl6QnhCLGVBQWV3QyxpQkFBaUIsUUFBUyxTQUFDSSxHQUN6QyxPQUFRQSxFQUFFWSxLQUNULElBQUssVUFDTCxJQUFLLFlBQ0pSLGdCQUFlLEVBQ2YsTUFDRCxJQUFLLFFBQ0pBLGdCQUFlLEVBQ2ZDLGtCQUFpQixDQUNYLENBRVQsQ0FBQyxFQUVENUMsa0JBQWtCbUMsaUJBQWlCLFFBQVMsU0FBQ0ksR0FDNUM1QyxlQUFleUYsTUFBSyxDQUNyQixDQUFDLEVBRUR6RixlQUFld0MsaUJBQWlCLFVBQVdhLGdCQUFnQixFQUczRDNDLFdBQVc4QixpQkFBaUIsVUFBV2UsZ0JBQWdCLEVBQ3ZEM0MsbUJBQW1CNEIsaUJBQWlCLFFBQVNrQixjQUFjLEVBQzNEL0MsbUJBQW1CNkIsaUJBQWlCLFFBQVNtQixjQUFjLEVBRzNEdEMscUJBQXFCbUIsaUJBQWlCLFFBQVMsU0FBQ0ksR0FDL0NBLEVBQUVhLGVBQWMsRUFDaEJnQixhQUFZLEVBQ1pJLGNBQWEsQ0FDZCxDQUFDIiwiZmlsZSI6InJlc2VydmF0aW9uLWZvcm0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogY3VzdG9tIHNlbGVjdCBlbGVtZW50cyAqL1xyXG5jb25zdCBjdXN0b21TZWxlY3Q6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zZWxlY3QnKTtcclxuY29uc3Qgb3JpZ2luYWxTZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50ID0gY3VzdG9tU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xyXG5jb25zdCBvcmlnaW5hbFNlbGVjdE9wdGlvbnM6IEFycmF5PEhUTUxPcHRpb25FbGVtZW50PiA9IEFycmF5LmZyb20ob3JpZ2luYWxTZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnb3B0aW9uJykpO1xyXG5jb25zdCBjdXN0b21TZWxlY3RGb2N1czogSFRNTEVsZW1lbnQgPSBjdXN0b21TZWxlY3QucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zZWxlY3RfX2ZvY3VzJyk7XHJcbmNvbnN0IGN1c3RvbVNlbGVjdEZvY3VzVGV4dDogSFRNTEVsZW1lbnQgPSBjdXN0b21TZWxlY3RGb2N1cy5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XHJcbmNvbnN0IGN1c3RvbVNlbGVjdE9wdGlvbnNDb250YWluZXI6IEhUTUxFbGVtZW50ID0gY3VzdG9tU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2VsZWN0X19vcHRpb25zJyk7XHJcbmxldCBjdXN0b21TZWxlY3RPcHRpb25zOiBBcnJheTxIVE1MRWxlbWVudD4gPSBbXTtcclxuXHJcbi8qIHNwaW5idXR0b24gZWxlbWVudHMgKi9cclxuY29uc3QgY3VzdG9tU3BpbmJ1dHRvbjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3BpbmJ1dHRvbicpO1xyXG5jb25zdCBzcGluQnV0dG9uOiBIVE1MRWxlbWVudCA9IGN1c3RvbVNwaW5idXR0b24ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJzcGluYnV0dG9uXCJdJyk7XHJcbmNvbnN0IGRlY3JlYXNlU3BpbmJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBjdXN0b21TcGluYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJyNkZWNyZWFzZS1wZW9wbGUnKTtcclxuY29uc3QgaW5jcmVhc2VTcGluYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGN1c3RvbVNwaW5idXR0b24ucXVlcnlTZWxlY3RvcignI2luY3JlYXNlLXBlb3BsZScpO1xyXG5cclxuLyogZm9ybSBlbGVtZW50cyAqL1xyXG5jb25zdCByZXNlcnZhdGlvbkZvcm06IEhUTUxGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXNlcnZhdGlvbi1mb3JtJyk7XHJcbmNvbnN0IG5hbWVJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHJlc2VydmF0aW9uRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwibmFtZVwiXScpO1xyXG5jb25zdCBlbWFpbElucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gcmVzZXJ2YXRpb25Gb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJlbWFpbFwiXScpO1xyXG5jb25zdCBtb250aElucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gcmVzZXJ2YXRpb25Gb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJtb250aFwiXScpO1xyXG5jb25zdCBkYXlJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHJlc2VydmF0aW9uRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZGF5XCJdJyk7XHJcbmNvbnN0IHllYXJJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHJlc2VydmF0aW9uRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwieWVhclwiXScpO1xyXG5jb25zdCBob3VySW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSByZXNlcnZhdGlvbkZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImhvdXJcIl0nKTtcclxuY29uc3QgbWludXRlc0lucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gcmVzZXJ2YXRpb25Gb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJtaW51dGVcIl0nKTtcclxuY29uc3QgcmVzZXJ2YXRpb25TdWJtaXRCdG46IEhUTUxCdXR0b25FbGVtZW50ID0gcmVzZXJ2YXRpb25Gb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcblxyXG4vKiBjb25zdGFudHMgKi9cclxuY29uc3QgQ0hFQ0tfSUNPTl9VUkw6IHN0cmluZyA9ICcuL2Rpc3QvYXNzZXRzL2ltYWdlcy9pY29ucy9pY29uLWNoZWNrLnN2Zyc7XHJcbmNvbnN0IEVNQUlMX1JFR0VYID1cclxuXHQvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XHJcblxyXG5jcmVhdGVDdXN0b21TZWxlY3RPcHRpb25zKCk7XHJcblxyXG4vKiBldmVudCBsaXN0ZW5lcnMgKi9cclxuLyogLS0tIGZvciBjdXN0b20gc2VsZWN0ICovXHJcbm9yaWdpbmFsU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuXHRzd2l0Y2ggKGUua2V5KSB7XHJcblx0XHRjYXNlICdBcnJvd1VwJzpcclxuXHRcdGNhc2UgJ0Fycm93RG93bic6XHJcblx0XHRcdGhhbmRsZVNlbGVjdGlvbigpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgJ0VudGVyJzpcclxuXHRcdFx0aGFuZGxlU2VsZWN0aW9uKCk7XHJcblx0XHRcdGNsb3NlQ3VzdG9tU2VsZWN0KCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdH1cclxufSk7XHJcblxyXG5jdXN0b21TZWxlY3RGb2N1cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBFdmVudCkgPT4ge1xyXG5cdG9yaWdpbmFsU2VsZWN0LmZvY3VzKCk7XHJcbn0pO1xyXG5cclxub3JpZ2luYWxTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9wZW5DdXN0b21TZWxlY3QpO1xyXG5cclxuLyogLS0tIGZvciBzcGluYnV0dG9uICovXHJcbnNwaW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZVNwaW5CdXR0b24pO1xyXG5pbmNyZWFzZVNwaW5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbmNyZWFzZVBlb3BsZSk7XHJcbmRlY3JlYXNlU3BpbmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlY3JlYXNlUGVvcGxlKTtcclxuXHJcbi8qIC0tLSBmb3IgcmVzZXJ2YXRpb24gZm9ybSAqL1xyXG5yZXNlcnZhdGlvblN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBFdmVudCkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHR2YWxpZGF0ZU5hbWUoKTtcclxuXHR2YWxpZGF0ZUVtYWlsKCk7XHJcbn0pO1xyXG5cclxuLyogaGVscGVyIGZ1bmN0aW9ucyAqL1xyXG4vKiAtLS0gZm9yIGN1c3RvbSBzZWxlY3QgKi9cclxuZnVuY3Rpb24gY3JlYXRlQ3VzdG9tU2VsZWN0T3B0aW9ucygpOiB2b2lkIHtcclxuXHRvcmlnaW5hbFNlbGVjdE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xyXG5cdFx0Y29uc3QgY3VzdG9tT3B0aW9uOiBIVE1MRWxlbWVudCA9IGNyZWF0ZUN1c3RvbU9wdGlvbihvcHRpb24pO1xyXG5cdFx0Y3VzdG9tU2VsZWN0T3B0aW9ucy5wdXNoKGN1c3RvbU9wdGlvbik7XHJcblx0XHRjdXN0b21TZWxlY3RPcHRpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKGN1c3RvbU9wdGlvbik7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUN1c3RvbU9wdGlvbihvcHRpb246IEhUTUxPcHRpb25FbGVtZW50KTogSFRNTEVsZW1lbnQge1xyXG5cdGNvbnN0IG9wdGlvbldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0b3B0aW9uV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tc2VsZWN0X19vcHRpb24nKTtcclxuXHRvcHRpb25XcmFwcGVyLnNldEF0dHJpYnV0ZSgnZGF0YS1zZWxlY3RlZCcsIG9wdGlvbi5zZWxlY3RlZC50b1N0cmluZygpKTtcclxuXHRvcHRpb25XcmFwcGVyLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIG9wdGlvbi52YWx1ZSk7XHJcblx0b3B0aW9uV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUN1c3RvbU9wdGlvbik7XHJcblxyXG5cdGNvbnN0IGNoZWNrSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRjaGVja0ltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgQ0hFQ0tfSUNPTl9VUkwpO1xyXG5cdGNoZWNrSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblxyXG5cdGNvbnN0IG9wdGlvblRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0b3B0aW9uVGV4dC5pbm5lclRleHQgPSBvcHRpb24uaW5uZXJUZXh0O1xyXG5cclxuXHRvcHRpb25XcmFwcGVyLmFwcGVuZENoaWxkKGNoZWNrSW1hZ2UpO1xyXG5cdG9wdGlvbldyYXBwZXIuYXBwZW5kQ2hpbGQob3B0aW9uVGV4dCk7XHJcblxyXG5cdHJldHVybiBvcHRpb25XcmFwcGVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDdXN0b21PcHRpb24oZTogRXZlbnQpOiB2b2lkIHtcclxuXHRjb25zdCBvcHRpb246IEhUTUxFbGVtZW50ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0b3JpZ2luYWxTZWxlY3RPcHRpb25zLmZvckVhY2gob3B0ID0+IChvcHQuc2VsZWN0ZWQgPSBvcHQudmFsdWUgPT09IG9wdGlvbi5kYXRhc2V0LnZhbHVlKSk7XHJcblx0aGFuZGxlU2VsZWN0aW9uKCk7XHJcblx0Y2xvc2VDdXN0b21TZWxlY3QoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uKCk6IHZvaWQge1xyXG5cdGNvbnN0IHNlbGVjdGVkVmFsdWU6IHN0cmluZyA9IG9yaWdpbmFsU2VsZWN0T3B0aW9ucy5maWx0ZXIob3B0ID0+IG9wdC5zZWxlY3RlZClbMF0udmFsdWU7XHJcblx0Y3VzdG9tU2VsZWN0Rm9jdXNUZXh0LmlubmVyVGV4dCA9IHNlbGVjdGVkVmFsdWUudG9VcHBlckNhc2UoKTtcclxuXHRjdXN0b21TZWxlY3RPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuXHRcdG9wdGlvbi5kYXRhc2V0LnNlbGVjdGVkID0gKG9wdGlvbi5kYXRhc2V0LnZhbHVlID09PSBzZWxlY3RlZFZhbHVlKS50b1N0cmluZygpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuQ3VzdG9tU2VsZWN0KCk6IHZvaWQge1xyXG5cdGN1c3RvbVNlbGVjdC5kYXRhc2V0Lm9wZW4gPSAndHJ1ZSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlQ3VzdG9tU2VsZWN0KCk6IHZvaWQge1xyXG5cdGN1c3RvbVNlbGVjdC5kYXRhc2V0Lm9wZW4gPSAnZmFsc2UnO1xyXG59XHJcblxyXG4vKiAtLS0gZm9yIHNwaW5idXR0b24gKi9cclxuZnVuY3Rpb24gaGFuZGxlU3BpbkJ1dHRvbihlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0c3dpdGNoIChlLmtleSkge1xyXG5cdFx0Y2FzZSAnQXJyb3dVcCc6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0aW5jcmVhc2VQZW9wbGUoKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICdBcnJvd0Rvd24nOlxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGRlY3JlYXNlUGVvcGxlKCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnSG9tZSc6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2V0TWluUGVvcGxlKCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnRW5kJzpcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRzZXRNYXhQZW9wbGUoKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbmNyZWFzZVBlb3BsZSgpOiB2b2lkIHtcclxuXHRjb25zdCBjdXJyZW50VmFsdWU6IG51bWJlciA9IE51bWJlcihzcGluQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycpKTtcclxuXHRjb25zdCBtYXhWYWx1ZTogbnVtYmVyID0gTnVtYmVyKHNwaW5CdXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbWF4JykpO1xyXG5cdGNvbnN0IG5ld1ZhbHVlOiBudW1iZXIgPSBNYXRoLm1pbihjdXJyZW50VmFsdWUgKyAxLCBtYXhWYWx1ZSk7XHJcblx0dXBkYXRlU3BpbkJ1dHRvbihuZXdWYWx1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlY3JlYXNlUGVvcGxlKCk6IHZvaWQge1xyXG5cdGNvbnN0IGN1cnJlbnRWYWx1ZTogbnVtYmVyID0gTnVtYmVyKHNwaW5CdXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JykpO1xyXG5cdGNvbnN0IG1pblZhbHVlOiBudW1iZXIgPSBOdW1iZXIoc3BpbkJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtaW4nKSk7XHJcblx0Y29uc3QgbmV3VmFsdWU6IG51bWJlciA9IE1hdGgubWF4KGN1cnJlbnRWYWx1ZSAtIDEsIG1pblZhbHVlKTtcclxuXHR1cGRhdGVTcGluQnV0dG9uKG5ld1ZhbHVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0TWF4UGVvcGxlKCkge1xyXG5cdGNvbnN0IG1heFZhbHVlOiBudW1iZXIgPSBOdW1iZXIoc3BpbkJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtYXgnKSk7XHJcblx0dXBkYXRlU3BpbkJ1dHRvbihtYXhWYWx1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldE1pblBlb3BsZSgpIHtcclxuXHRjb25zdCBtaW5WYWx1ZTogbnVtYmVyID0gTnVtYmVyKHNwaW5CdXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbWluJykpO1xyXG5cdHVwZGF0ZVNwaW5CdXR0b24obWluVmFsdWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVTcGluQnV0dG9uKG5ld1ZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuXHRzcGluQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIG5ld1ZhbHVlLnRvU3RyaW5nKCkpO1xyXG5cdHNwaW5CdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVldGV4dCcsIGAke25ld1ZhbHVlfSBwZW9wbGVgKTtcclxuXHRzcGluQnV0dG9uLmlubmVyVGV4dCA9IGAke25ld1ZhbHVlfSBwZW9wbGVgO1xyXG59XHJcblxyXG4vKiAtLS0gZm9yIGZvcm0gdmFsaWRhdGlvbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWUoKTogYm9vbGVhbiB7XHJcblx0Y29uc3QgbmFtZVZhbHVlOiBzdHJpbmcgPSBuYW1lSW5wdXQudmFsdWU7XHJcblxyXG5cdGlmIChpc0JsYW5rKG5hbWVWYWx1ZSkpIHJldHVybiBkaXNwbGF5Rm9ybUVycm9yKG5hbWVJbnB1dCwgJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnKTtcclxuXHJcblx0cmV0dXJuIHJlbW92ZUZvcm1FcnJvcihuYW1lSW5wdXQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUVtYWlsKCk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGVtYWlsVmFsdWU6IHN0cmluZyA9IGVtYWlsSW5wdXQudmFsdWU7XHJcblxyXG5cdGlmIChpc0JsYW5rKGVtYWlsVmFsdWUpKSByZXR1cm4gZGlzcGxheUZvcm1FcnJvcihlbWFpbElucHV0LCAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCcpO1xyXG5cdGlmICghaXNWYWxpZEVtYWlsKGVtYWlsVmFsdWUpKSByZXR1cm4gZGlzcGxheUZvcm1FcnJvcihlbWFpbElucHV0LCAnUHJvdmlkZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnKTtcclxuXHJcblx0cmV0dXJuIHJlbW92ZUZvcm1FcnJvcihlbWFpbElucHV0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzcGxheUZvcm1FcnJvcihpbnB1dDogSFRNTElucHV0RWxlbWVudCwgbWVzc2FnZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0bGV0IGZvcm1Hcm91cDogSFRNTEVsZW1lbnQgPSBpbnB1dC5jbG9zZXN0KCcuZm9ybS1ncm91cCcpO1xyXG5cdGxldCBmb3JtRXJyb3I6IEhUTUxFbGVtZW50O1xyXG5cclxuXHR3aGlsZSAoZm9ybUdyb3VwKSB7XHJcblx0XHRmb3JtR3JvdXAuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuXHRcdGZvcm1FcnJvciA9IGZvcm1Hcm91cC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lcnJvcicpO1xyXG5cclxuXHRcdGlmIChmb3JtRXJyb3IpIHtcclxuXHRcdFx0Zm9ybUVycm9yLmlubmVyVGV4dCA9IG1lc3NhZ2U7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZvcm1Hcm91cCA9IGZvcm1Hcm91cC5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoJy5mb3JtLWdyb3VwJyk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUZvcm1FcnJvcihpbnB1dDogSFRNTElucHV0RWxlbWVudCk6IGJvb2xlYW4ge1xyXG5cdGxldCBmb3JtR3JvdXA6IEhUTUxFbGVtZW50ID0gaW5wdXQuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTtcclxuXHRsZXQgZm9ybUVycm9yOiBIVE1MRWxlbWVudDtcclxuXHJcblx0d2hpbGUgKGZvcm1Hcm91cCkge1xyXG5cdFx0Zm9ybUdyb3VwLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcblx0XHRmb3JtRXJyb3IgPSBmb3JtR3JvdXAucXVlcnlTZWxlY3RvcignLmZvcm0tZXJyb3InKTtcclxuXHJcblx0XHRpZiAoZm9ybUVycm9yKSBmb3JtRXJyb3IuaW5uZXJUZXh0ID0gJyc7XHJcblxyXG5cdFx0Zm9ybUdyb3VwID0gZm9ybUdyb3VwLnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0JsYW5rKHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gdmFsdWUgPT09ICcnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc1ZhbGlkRW1haWwoZW1haWw6IHN0cmluZykge1xyXG5cdHJldHVybiBFTUFJTF9SRUdFWC50ZXN0KGVtYWlsKTtcclxufVxyXG4iLCJjb25zdCBjdXN0b21TZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLXNlbGVjdCcpO1xuY29uc3Qgb3JpZ2luYWxTZWxlY3QgPSBjdXN0b21TZWxlY3QucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XG5jb25zdCBvcmlnaW5hbFNlbGVjdE9wdGlvbnMgPSBBcnJheS5mcm9tKG9yaWdpbmFsU2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpKTtcbmNvbnN0IGN1c3RvbVNlbGVjdEZvY3VzID0gY3VzdG9tU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2VsZWN0X19mb2N1cycpO1xuY29uc3QgY3VzdG9tU2VsZWN0Rm9jdXNUZXh0ID0gY3VzdG9tU2VsZWN0Rm9jdXMucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuY29uc3QgY3VzdG9tU2VsZWN0T3B0aW9uc0NvbnRhaW5lciA9IGN1c3RvbVNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLXNlbGVjdF9fb3B0aW9ucycpO1xubGV0IGN1c3RvbVNlbGVjdE9wdGlvbnMgPSBbXTtcbmNvbnN0IGN1c3RvbVNwaW5idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3BpbmJ1dHRvbicpO1xuY29uc3Qgc3BpbkJ1dHRvbiA9IGN1c3RvbVNwaW5idXR0b24ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJzcGluYnV0dG9uXCJdJyk7XG5jb25zdCBkZWNyZWFzZVNwaW5idXR0b24gPSBjdXN0b21TcGluYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJyNkZWNyZWFzZS1wZW9wbGUnKTtcbmNvbnN0IGluY3JlYXNlU3BpbmJ1dHRvbiA9IGN1c3RvbVNwaW5idXR0b24ucXVlcnlTZWxlY3RvcignI2luY3JlYXNlLXBlb3BsZScpO1xuY29uc3QgcmVzZXJ2YXRpb25Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc2VydmF0aW9uLWZvcm0nKTtcbmNvbnN0IG5hbWVJbnB1dCA9IHJlc2VydmF0aW9uRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwibmFtZVwiXScpO1xuY29uc3QgZW1haWxJbnB1dCA9IHJlc2VydmF0aW9uRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZW1haWxcIl0nKTtcbmNvbnN0IG1vbnRoSW5wdXQgPSByZXNlcnZhdGlvbkZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cIm1vbnRoXCJdJyk7XG5jb25zdCBkYXlJbnB1dCA9IHJlc2VydmF0aW9uRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZGF5XCJdJyk7XG5jb25zdCB5ZWFySW5wdXQgPSByZXNlcnZhdGlvbkZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInllYXJcIl0nKTtcbmNvbnN0IGhvdXJJbnB1dCA9IHJlc2VydmF0aW9uRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiaG91clwiXScpO1xuY29uc3QgbWludXRlc0lucHV0ID0gcmVzZXJ2YXRpb25Gb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJtaW51dGVcIl0nKTtcbmNvbnN0IHJlc2VydmF0aW9uU3VibWl0QnRuID0gcmVzZXJ2YXRpb25Gb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG5jb25zdCBDSEVDS19JQ09OX1VSTCA9ICcuL2Rpc3QvYXNzZXRzL2ltYWdlcy9pY29ucy9pY29uLWNoZWNrLnN2Zyc7XG5jb25zdCBFTUFJTF9SRUdFWCA9IC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbmNyZWF0ZUN1c3RvbVNlbGVjdE9wdGlvbnMoKTtcbm9yaWdpbmFsU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGUpID0+IHtcbiAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgaGFuZGxlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgaGFuZGxlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBjbG9zZUN1c3RvbVNlbGVjdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufSk7XG5jdXN0b21TZWxlY3RGb2N1cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgb3JpZ2luYWxTZWxlY3QuZm9jdXMoKTtcbn0pO1xub3JpZ2luYWxTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9wZW5DdXN0b21TZWxlY3QpO1xuc3BpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlU3BpbkJ1dHRvbik7XG5pbmNyZWFzZVNwaW5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbmNyZWFzZVBlb3BsZSk7XG5kZWNyZWFzZVNwaW5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWNyZWFzZVBlb3BsZSk7XG5yZXNlcnZhdGlvblN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhbGlkYXRlTmFtZSgpO1xuICAgIHZhbGlkYXRlRW1haWwoKTtcbn0pO1xuZnVuY3Rpb24gY3JlYXRlQ3VzdG9tU2VsZWN0T3B0aW9ucygpIHtcbiAgICBvcmlnaW5hbFNlbGVjdE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICBjb25zdCBjdXN0b21PcHRpb24gPSBjcmVhdGVDdXN0b21PcHRpb24ob3B0aW9uKTtcbiAgICAgICAgY3VzdG9tU2VsZWN0T3B0aW9ucy5wdXNoKGN1c3RvbU9wdGlvbik7XG4gICAgICAgIGN1c3RvbVNlbGVjdE9wdGlvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoY3VzdG9tT3B0aW9uKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUN1c3RvbU9wdGlvbihvcHRpb24pIHtcbiAgICBjb25zdCBvcHRpb25XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIG9wdGlvbldyYXBwZXIuY2xhc3NMaXN0LmFkZCgnY3VzdG9tLXNlbGVjdF9fb3B0aW9uJyk7XG4gICAgb3B0aW9uV3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2VsZWN0ZWQnLCBvcHRpb24uc2VsZWN0ZWQudG9TdHJpbmcoKSk7XG4gICAgb3B0aW9uV3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBvcHRpb24udmFsdWUpO1xuICAgIG9wdGlvbldyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDdXN0b21PcHRpb24pO1xuICAgIGNvbnN0IGNoZWNrSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjaGVja0ltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgQ0hFQ0tfSUNPTl9VUkwpO1xuICAgIGNoZWNrSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XG4gICAgY29uc3Qgb3B0aW9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBvcHRpb25UZXh0LmlubmVyVGV4dCA9IG9wdGlvbi5pbm5lclRleHQ7XG4gICAgb3B0aW9uV3JhcHBlci5hcHBlbmRDaGlsZChjaGVja0ltYWdlKTtcbiAgICBvcHRpb25XcmFwcGVyLmFwcGVuZENoaWxkKG9wdGlvblRleHQpO1xuICAgIHJldHVybiBvcHRpb25XcmFwcGVyO1xufVxuZnVuY3Rpb24gaGFuZGxlQ3VzdG9tT3B0aW9uKGUpIHtcbiAgICBjb25zdCBvcHRpb24gPSBlLnRhcmdldDtcbiAgICBvcmlnaW5hbFNlbGVjdE9wdGlvbnMuZm9yRWFjaChvcHQgPT4gKG9wdC5zZWxlY3RlZCA9IG9wdC52YWx1ZSA9PT0gb3B0aW9uLmRhdGFzZXQudmFsdWUpKTtcbiAgICBoYW5kbGVTZWxlY3Rpb24oKTtcbiAgICBjbG9zZUN1c3RvbVNlbGVjdCgpO1xufVxuZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBvcmlnaW5hbFNlbGVjdE9wdGlvbnMuZmlsdGVyKG9wdCA9PiBvcHQuc2VsZWN0ZWQpWzBdLnZhbHVlO1xuICAgIGN1c3RvbVNlbGVjdEZvY3VzVGV4dC5pbm5lclRleHQgPSBzZWxlY3RlZFZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgY3VzdG9tU2VsZWN0T3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgIG9wdGlvbi5kYXRhc2V0LnNlbGVjdGVkID0gKG9wdGlvbi5kYXRhc2V0LnZhbHVlID09PSBzZWxlY3RlZFZhbHVlKS50b1N0cmluZygpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gb3BlbkN1c3RvbVNlbGVjdCgpIHtcbiAgICBjdXN0b21TZWxlY3QuZGF0YXNldC5vcGVuID0gJ3RydWUnO1xufVxuZnVuY3Rpb24gY2xvc2VDdXN0b21TZWxlY3QoKSB7XG4gICAgY3VzdG9tU2VsZWN0LmRhdGFzZXQub3BlbiA9ICdmYWxzZSc7XG59XG5mdW5jdGlvbiBoYW5kbGVTcGluQnV0dG9uKGUpIHtcbiAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaW5jcmVhc2VQZW9wbGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZGVjcmVhc2VQZW9wbGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdIb21lJzpcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHNldE1pblBlb3BsZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VuZCc6XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzZXRNYXhQZW9wbGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluY3JlYXNlUGVvcGxlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IE51bWJlcihzcGluQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycpKTtcbiAgICBjb25zdCBtYXhWYWx1ZSA9IE51bWJlcihzcGluQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1heCcpKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IE1hdGgubWluKGN1cnJlbnRWYWx1ZSArIDEsIG1heFZhbHVlKTtcbiAgICB1cGRhdGVTcGluQnV0dG9uKG5ld1ZhbHVlKTtcbn1cbmZ1bmN0aW9uIGRlY3JlYXNlUGVvcGxlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IE51bWJlcihzcGluQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycpKTtcbiAgICBjb25zdCBtaW5WYWx1ZSA9IE51bWJlcihzcGluQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1pbicpKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IE1hdGgubWF4KGN1cnJlbnRWYWx1ZSAtIDEsIG1pblZhbHVlKTtcbiAgICB1cGRhdGVTcGluQnV0dG9uKG5ld1ZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldE1heFBlb3BsZSgpIHtcbiAgICBjb25zdCBtYXhWYWx1ZSA9IE51bWJlcihzcGluQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1heCcpKTtcbiAgICB1cGRhdGVTcGluQnV0dG9uKG1heFZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldE1pblBlb3BsZSgpIHtcbiAgICBjb25zdCBtaW5WYWx1ZSA9IE51bWJlcihzcGluQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1pbicpKTtcbiAgICB1cGRhdGVTcGluQnV0dG9uKG1pblZhbHVlKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZVNwaW5CdXR0b24obmV3VmFsdWUpIHtcbiAgICBzcGluQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIG5ld1ZhbHVlLnRvU3RyaW5nKCkpO1xuICAgIHNwaW5CdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVldGV4dCcsIGAke25ld1ZhbHVlfSBwZW9wbGVgKTtcbiAgICBzcGluQnV0dG9uLmlubmVyVGV4dCA9IGAke25ld1ZhbHVlfSBwZW9wbGVgO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lKCkge1xuICAgIGNvbnN0IG5hbWVWYWx1ZSA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgICBpZiAoaXNCbGFuayhuYW1lVmFsdWUpKVxuICAgICAgICByZXR1cm4gZGlzcGxheUZvcm1FcnJvcihuYW1lSW5wdXQsICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJyk7XG4gICAgcmV0dXJuIHJlbW92ZUZvcm1FcnJvcihuYW1lSW5wdXQpO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVFbWFpbCgpIHtcbiAgICBjb25zdCBlbWFpbFZhbHVlID0gZW1haWxJbnB1dC52YWx1ZTtcbiAgICBpZiAoaXNCbGFuayhlbWFpbFZhbHVlKSlcbiAgICAgICAgcmV0dXJuIGRpc3BsYXlGb3JtRXJyb3IoZW1haWxJbnB1dCwgJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIWlzVmFsaWRFbWFpbChlbWFpbFZhbHVlKSlcbiAgICAgICAgcmV0dXJuIGRpc3BsYXlGb3JtRXJyb3IoZW1haWxJbnB1dCwgJ1Byb3ZpZGUgYSB2YWxpZCBlbWFpbCBhZGRyZXNzJyk7XG4gICAgcmV0dXJuIHJlbW92ZUZvcm1FcnJvcihlbWFpbElucHV0KTtcbn1cbmZ1bmN0aW9uIGRpc3BsYXlGb3JtRXJyb3IoaW5wdXQsIG1lc3NhZ2UpIHtcbiAgICBsZXQgZm9ybUdyb3VwID0gaW5wdXQuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTtcbiAgICBsZXQgZm9ybUVycm9yO1xuICAgIHdoaWxlIChmb3JtR3JvdXApIHtcbiAgICAgICAgZm9ybUdyb3VwLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG4gICAgICAgIGZvcm1FcnJvciA9IGZvcm1Hcm91cC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lcnJvcicpO1xuICAgICAgICBpZiAoZm9ybUVycm9yKSB7XG4gICAgICAgICAgICBmb3JtRXJyb3IuaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1Hcm91cCA9IGZvcm1Hcm91cC5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoJy5mb3JtLWdyb3VwJyk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUZvcm1FcnJvcihpbnB1dCkge1xuICAgIGxldCBmb3JtR3JvdXAgPSBpbnB1dC5jbG9zZXN0KCcuZm9ybS1ncm91cCcpO1xuICAgIGxldCBmb3JtRXJyb3I7XG4gICAgd2hpbGUgKGZvcm1Hcm91cCkge1xuICAgICAgICBmb3JtR3JvdXAuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcbiAgICAgICAgZm9ybUVycm9yID0gZm9ybUdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVycm9yJyk7XG4gICAgICAgIGlmIChmb3JtRXJyb3IpXG4gICAgICAgICAgICBmb3JtRXJyb3IuaW5uZXJUZXh0ID0gJyc7XG4gICAgICAgIGZvcm1Hcm91cCA9IGZvcm1Hcm91cC5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoJy5mb3JtLWdyb3VwJyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNCbGFuayh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gJyc7XG59XG5mdW5jdGlvbiBpc1ZhbGlkRW1haWwoZW1haWwpIHtcbiAgICByZXR1cm4gRU1BSUxfUkVHRVgudGVzdChlbWFpbCk7XG59XG4iXX0=
